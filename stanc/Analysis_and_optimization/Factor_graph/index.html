<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Factor_graph (stanc.Analysis_and_optimization.Factor_graph)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 3.1.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script><script>let base_url = '../../../';
let search_urls = ['../../db.js','../../../sherlodoc.js'];
</script><script src="../../../odoc.support/odoc_search.js" defer="defer"></script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../index.html">Index</a> &#x00BB; <a href="../../index.html">stanc</a> &#x00BB; <a href="../index.html">Analysis_and_optimization</a> &#x00BB; Factor_graph</nav><div class="odoc-search"><div class="search-inner"><input class="search-bar" placeholder="ðŸ”Ž Type '/' to search..."/><div class="search-snake"></div><div class="search-result"></div></div></div><header class="odoc-preamble"><h1>Module <code><span>Analysis_and_optimization.Factor_graph</span></code></h1></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-factor"><a href="#type-factor" class="anchor"></a><code><span><span class="keyword">type</span> factor</span><span> = </span></code><ol><li id="type-factor.TargetTerm" class="def variant constructor anchored"><a href="#type-factor.TargetTerm" class="anchor"></a><code><span>| </span><span><span class="constructor">TargetTerm</span> <span class="keyword">of</span> <a href="../../Middle/Expr/Typed/index.html#type-t">Middle.Expr.Typed.t</a></span></code></li><li id="type-factor.Reject" class="def variant constructor anchored"><a href="#type-factor.Reject" class="anchor"></a><code><span>| </span><span><span class="constructor">Reject</span></span></code></li><li id="type-factor.LPFunction" class="def variant constructor anchored"><a href="#type-factor.LPFunction" class="anchor"></a><code><span>| </span><span><span class="constructor">LPFunction</span> <span class="keyword">of</span> string * <span><a href="../../Middle/Expr/Typed/index.html#type-t">Middle.Expr.Typed.t</a> list</span></span></code></li></ol></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-factor_of_sexp"><a href="#val-factor_of_sexp" class="anchor"></a><code><span><span class="keyword">val</span> factor_of_sexp : <span><span class="xref-unresolved">Sexplib0</span>.Sexp.t <span class="arrow">&#45;&gt;</span></span> <a href="#type-factor">factor</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-sexp_of_factor"><a href="#val-sexp_of_factor" class="anchor"></a><code><span><span class="keyword">val</span> sexp_of_factor : <span><a href="#type-factor">factor</a> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Sexplib0</span>.Sexp.t</span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-factor_graph"><a href="#type-factor_graph" class="anchor"></a><code><span><span class="keyword">type</span> factor_graph</span><span> = </span><span>{</span></code><ol><li id="type-factor_graph.factor_map" class="def record field anchored"><a href="#type-factor_graph.factor_map" class="anchor"></a><code><span>factor_map : <span><span>(<a href="#type-factor">factor</a> * <a href="../Dataflow_types/index.html#type-label">Dataflow_types.label</a>,
               <span><a href="../Dataflow_types/index.html#type-vexpr">Dataflow_types.vexpr</a> <span class="xref-unresolved">Core</span>.Set.Poly.t</span>)</span>
               <span class="xref-unresolved">Core</span>.Map.Poly.t</span>;</span></code></li><li id="type-factor_graph.var_map" class="def record field anchored"><a href="#type-factor_graph.var_map" class="anchor"></a><code><span>var_map : <span><span>(<a href="../Dataflow_types/index.html#type-vexpr">Dataflow_types.vexpr</a>,
            <span><span>(<a href="#type-factor">factor</a> * <a href="../Dataflow_types/index.html#type-label">Dataflow_types.label</a>)</span> <span class="xref-unresolved">Core</span>.Set.Poly.t</span>)</span>
            <span class="xref-unresolved">Core</span>.Map.Poly.t</span>;</span></code></li></ol><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-factor_graph_of_sexp"><a href="#val-factor_graph_of_sexp" class="anchor"></a><code><span><span class="keyword">val</span> factor_graph_of_sexp : <span><span class="xref-unresolved">Sexplib0</span>.Sexp.t <span class="arrow">&#45;&gt;</span></span> <a href="#type-factor_graph">factor_graph</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-sexp_of_factor_graph"><a href="#val-sexp_of_factor_graph" class="anchor"></a><code><span><span class="keyword">val</span> sexp_of_factor_graph : <span><a href="#type-factor_graph">factor_graph</a> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Sexplib0</span>.Sexp.t</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-extract_factors_statement"><a href="#val-extract_factors_statement" class="anchor"></a><code><span><span class="keyword">val</span> extract_factors_statement : 
  <span><span><span>(<a href="../../Middle/Expr/Typed/index.html#type-t">Middle.Expr.Typed.t</a>, <span class="type-var">'a</span>)</span> <a href="../../Middle/Stmt/Pattern/index.html#type-t">Middle.Stmt.Pattern.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-factor">factor</a> list</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-extract_factors"><a href="#val-extract_factors" class="anchor"></a><code><span><span class="keyword">val</span> extract_factors : 
  <span><span><span>(<span class="type-var">'a</span>, <span><span>(<a href="../../Middle/Expr/Typed/index.html#type-t">Middle.Expr.Typed.t</a>, <span class="type-var">'a</span>)</span> <a href="../../Middle/Stmt/Pattern/index.html#type-t">Middle.Stmt.Pattern.t</a></span> * <span class="type-var">'b</span>)</span> <span class="xref-unresolved">Core</span>.Map.Poly.t</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'a</span> * <a href="#type-factor">factor</a>)</span> list</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-factor_rhs"><a href="#val-factor_rhs" class="anchor"></a><code><span><span class="keyword">val</span> factor_rhs : <span><a href="#type-factor">factor</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Dataflow_types/index.html#type-vexpr">Dataflow_types.vexpr</a> <span class="xref-unresolved">Core</span>.Set.Poly.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-factor_var_dependencies"><a href="#val-factor_var_dependencies" class="anchor"></a><code><span><span class="keyword">val</span> factor_var_dependencies : 
  <span><span><span>(<a href="../Dataflow_types/index.html#type-label">Dataflow_types.label</a>,
    <span><span>(<a href="../../Middle/Expr/Typed/index.html#type-t">Middle.Expr.Typed.t</a>, <a href="../Dataflow_types/index.html#type-label">Dataflow_types.label</a>)</span> <a href="../../Middle/Stmt/Pattern/index.html#type-t">Middle.Stmt.Pattern.t</a></span>
    * <a href="../Dependence_analysis/index.html#type-node_dep_info">Dependence_analysis.node_dep_info</a>)</span>
    <span class="xref-unresolved">Core</span>.Map.Poly.t</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="../Dataflow_types/index.html#type-vexpr">Dataflow_types.vexpr</a> <span class="xref-unresolved">Core</span>.Set.Poly.t</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<a href="../Dataflow_types/index.html#type-label">Dataflow_types.label</a> * <a href="#type-factor">factor</a>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<a href="../Dataflow_types/index.html#type-vexpr">Dataflow_types.vexpr</a>, <span class="xref-unresolved">Core__</span>.Comparator.Poly.comparator_witness)</span> <span class="xref-unresolved">Core</span>.Set.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-build_adjacency_maps"><a href="#val-build_adjacency_maps" class="anchor"></a><code><span><span class="keyword">val</span> build_adjacency_maps : 
  <span><span><span>(<a href="../Dataflow_types/index.html#type-label">Dataflow_types.label</a> * <a href="#type-factor">factor</a> * <span><a href="../Dataflow_types/index.html#type-vexpr">Dataflow_types.vexpr</a> <span class="xref-unresolved">Core</span>.Set.Poly.t</span>)</span>
    <span class="xref-unresolved">Core</span>.List.t</span> <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-factor_graph">factor_graph</a></span></code></div><div class="spec-doc"><p>Helper function to generate the factor graph adjacency map representation from a factor-adjacency list</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-fg_remove_fac"><a href="#val-fg_remove_fac" class="anchor"></a><code><span><span class="keyword">val</span> fg_remove_fac : 
  <span><a href="#type-factor_graph">factor_graph</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<a href="#type-factor">factor</a> * <a href="../Dataflow_types/index.html#type-cf_state">Dataflow_types.cf_state</a>)</span> <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-factor_graph">factor_graph</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-fg_remove_var"><a href="#val-fg_remove_var" class="anchor"></a><code><span><span class="keyword">val</span> fg_remove_var : <span><a href="#type-factor_graph">factor_graph</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Dataflow_types/index.html#type-vexpr">Dataflow_types.vexpr</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-factor_graph">factor_graph</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-remove_touching"><a href="#val-remove_touching" class="anchor"></a><code><span><span class="keyword">val</span> remove_touching : 
  <span><span><a href="../Dataflow_types/index.html#type-vexpr">Dataflow_types.vexpr</a> <span class="xref-unresolved">Core</span>.Set.Poly.t</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-factor_graph">factor_graph</a> <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-factor_graph">factor_graph</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-prog_factor_graph"><a href="#val-prog_factor_graph" class="anchor"></a><code><span><span class="keyword">val</span> prog_factor_graph : 
  <span><span class="optlabel">?exclude_data_facs</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../Middle/Program/Typed/index.html#type-t">Middle.Program.Typed.t</a> <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-factor_graph">factor_graph</a></span></code></div><div class="spec-doc"><p>Build a factor graph from prog.log_prob using dependency analysis</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-fg_reaches"><a href="#val-fg_reaches" class="anchor"></a><code><span><span class="keyword">val</span> fg_reaches : 
  <span><span><a href="../Dataflow_types/index.html#type-vexpr">Dataflow_types.vexpr</a> <span class="xref-unresolved">Core</span>.Set.Poly.t</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="../Dataflow_types/index.html#type-vexpr">Dataflow_types.vexpr</a> <span class="xref-unresolved">Core</span>.Set.Poly.t</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-factor_graph">factor_graph</a> <span class="arrow">&#45;&gt;</span></span>
  bool</span></code></div><div class="spec-doc"><p>BFS on 'fg' with initial frontier 'starts' and terminating at any element of 'goals'</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-fg_factor_reaches"><a href="#val-fg_factor_reaches" class="anchor"></a><code><span><span class="keyword">val</span> fg_factor_reaches : 
  <span><span>(<a href="#type-factor">factor</a> * <a href="../Dataflow_types/index.html#type-label">Dataflow_types.label</a>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="../Dataflow_types/index.html#type-vexpr">Dataflow_types.vexpr</a> <span class="xref-unresolved">Core</span>.Set.Poly.t</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-factor_graph">factor_graph</a> <span class="arrow">&#45;&gt;</span></span>
  bool</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-fg_factor_is_prior"><a href="#val-fg_factor_is_prior" class="anchor"></a><code><span><span class="keyword">val</span> fg_factor_is_prior : 
  <span><a href="../Dataflow_types/index.html#type-vexpr">Dataflow_types.vexpr</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<a href="#type-factor">factor</a> * <a href="../Dataflow_types/index.html#type-label">Dataflow_types.label</a>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="../Dataflow_types/index.html#type-vexpr">Dataflow_types.vexpr</a> <span class="xref-unresolved">Core</span>.Set.Poly.t</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-factor_graph">factor_graph</a> <span class="arrow">&#45;&gt;</span></span>
  bool</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-fg_var_priors"><a href="#val-fg_var_priors" class="anchor"></a><code><span><span class="keyword">val</span> fg_var_priors : 
  <span><a href="../Dataflow_types/index.html#type-vexpr">Dataflow_types.vexpr</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="../Dataflow_types/index.html#type-vexpr">Dataflow_types.vexpr</a> <span class="xref-unresolved">Core</span>.Set.Poly.t</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-factor_graph">factor_graph</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<a href="#type-factor">factor</a> * <a href="../Dataflow_types/index.html#type-label">Dataflow_types.label</a>)</span> <span class="xref-unresolved">Core</span>.Set.Poly.t</span> option</span></span></code></div><div class="spec-doc"><p>Priors of V are neighbors of V which have no connection to any data except though V So for graph G and each parameter V: G' = G\V; For each neighbor F: Use BFS starting from F in G' and search for any data, if there is none, F is a prior</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-list_priors"><a href="#val-list_priors" class="anchor"></a><code><span><span class="keyword">val</span> list_priors : 
  <span><span class="optlabel">?factor_graph</span>:<span><a href="#type-factor_graph">factor_graph</a> option</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../Middle/Program/Typed/index.html#type-t">Middle.Program.Typed.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<a href="../Dataflow_types/index.html#type-vexpr">Dataflow_types.vexpr</a>,
    <span><span><span>(<a href="#type-factor">factor</a> * <a href="../Dataflow_types/index.html#type-label">Dataflow_types.label</a>)</span> <span class="xref-unresolved">Core</span>.Set.Poly.t</span> option</span>
    * <a href="../../Middle/Location_span/index.html#type-t">Middle.Location_span.t</a>)</span>
    <span class="xref-unresolved">Core</span>.Map.Poly.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-string_of_factor"><a href="#val-string_of_factor" class="anchor"></a><code><span><span class="keyword">val</span> string_of_factor : <span><a href="#type-factor">factor</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-string_of_vexpr"><a href="#val-string_of_vexpr" class="anchor"></a><code><span><span class="keyword">val</span> string_of_vexpr : <span><a href="../Dataflow_types/index.html#type-vexpr">Dataflow_types.vexpr</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-factor_graph_to_dot"><a href="#val-factor_graph_to_dot" class="anchor"></a><code><span><span class="keyword">val</span> factor_graph_to_dot : <span><a href="#type-factor_graph">factor_graph</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Utility to print a factor graph to the Graphviz dot language for visualization</p></div></div></div></body></html>
